# Automatically builds and publishes the mod when a new release is created on GitHub.
# It uploads the mod to GitHub, CurseForge and Modrinth.

name: Beta

on:
  push:
    branches:
      - "1.20.1-dev"

jobs:
  build:
    runs-on: ubuntu-latest                        
    steps:                                        
      - name: Send Discord webhook
        uses: Ilshidur/action-discord@0.3.2
        with:
          args: "<@&1195647504730050670>"
        env:
          DISCORD_WEBHOOK: "${{secrets.DISCORD_WEBHOOK}}"
          DISCORD_EMBEDS: |
            [{
              "title": "${{env.RELEASE_NAME}} for Minecraft ${{env.MINECRAFT_VERSION}} Released",
              "color": 14177041,
              "thumbnail": {
                "url": "https://sun9-26.userapi.com/impg/tONr8xsZxwJhkVbeV9nLh6WJTT9JL5yeGTzw0A/khlieuPeAJk.jpg?size=1920x1080&quality=96&sign=1c071ed8ac91a735a11fb8079707b499&type=album"
              },
              "url": "https://www.curseforge.com/minecraft/mc-mods/keepers-of-the-stones-ii",
              "fields": [
                  {
                    "name": "Download now:",
                    "value": "[<:curseforge:805066577871110196> CurseForge](https://www.curseforge.com/minecraft/mc-mods/keepers-of-the-stones-ii)\n[<:modrinth:805066578215043092> Modrinth](https://modrinth.com/mod/keepers-of-the-stones-2)\n[<:github:805066578164580392> GitHub](https://github.com/Environment-Studios-Official/Keepers-of-the-Stones-2)",
                    "inline": true
                  }
              ],
              "footer": {
                "text": "Created by the Environment Studios team!",
                "icon_url": "https://sun9-2.userapi.com/impg/uV8n02lvJ-IPojMugzVzla-mS1XNSYxP7kK37w/dFRlvkG06Pg.jpg?size=2268x2268&quality=95&sign=d1bc84ea1e0be3a5ad198ce9f1227b11&type=album"
              }
            }]
